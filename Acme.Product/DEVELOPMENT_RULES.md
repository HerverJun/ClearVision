# ClearVision 开发规则

## 规则 1：代码修改后必须更新 TODO.md

### 适用范围
- 所有代码文件修改（新增、删除、编辑）
- 配置文件修改
- 项目结构变更

### 执行步骤

#### 1. 代码修改前
- [ ] 查看当前 TODO.md 了解当前进度
- [ ] 确认本次修改对应的任务项

#### 2. 代码修改后
- [ ] **立即更新 TODO.md**（在提交代码前完成）
- [ ] 标记已完成的任务 `[x]`
- [ ] 更新进度百分比
- [ ] 如有新增任务，添加到对应阶段

#### 3. 更新内容要求

**必须更新以下章节：**

1. **进度总览表** - 更新完成度百分比
2. **已完成工作摘要** - 添加本次完成的工作
3. **当前进行中的工作** - 更新正在进行的任务
4. **具体阶段任务** - 标记完成的任务 `[x]`
5. **下一步行动计划** - 根据实际情况调整
6. **变更日志** - 在顶部添加新的变更记录

### 变更日志格式

```markdown
### YYYY-MM-DD 更新 X（简短描述）
- [修改类型] 具体修改内容
- ✅ 完成的任务
- 🟡 进行中的任务
- 🔴 遇到的问题/阻塞
- 📊 进度更新：阶段X - XX%
```

### 修改类型标记
- ✅ 完成（已完成的功能/任务）
- 🟡 进行中（正在开发的功能）
- 🔴 阻塞（遇到问题需要解决）
- 📝 文档（文档更新）
- 🔧 配置（配置文件修改）
- 🐛 修复（Bug修复）
- ⭐ 新增（新增功能）

### 示例

**代码修改：**
```bash
# 修改了 Operator.cs 文件，添加了新功能
```

**TODO.md 更新：**
```markdown
### 2026-01-31 更新 5（算子执行功能增强）
- ⭐ 新增 Operator.Execute() 方法
- ⭐ 新增执行超时控制逻辑
- ✅ 完成算子执行状态管理
- 🟡 进行中：算子结果缓存机制
- 📊 进度更新：阶段2 - 30%
```

### 检查清单

每次提交代码前，确认：
- [ ] 代码修改已完成
- [ ] TODO.md 已同步更新
- [ ] 变更日志已添加
- [ ] 进度百分比已更新
- [ ] 任务状态标记正确（`[ ]` 或 `[x]`）

### 自动化提醒

在 Git 提交信息中引用 TODO 更新：
```bash
git commit -m "feat: 添加算子执行功能

- 实现 Operator.Execute() 方法
- 添加执行超时控制
- 更新 TODO.md 进度"
```

### 违规处理

如果忘记更新 TODO.md：
1. 立即补充更新
2. 在下次提交中注明 "补充更新 TODO.md"
3. 养成修改代码后立即更新文档的习惯

---

## 规则 2：保持代码与文档同步

### 代码注释规范
- 所有公共 API 必须有 XML 文档注释
- 复杂逻辑必须添加行内注释
- 领域实体必须说明业务含义

### 文件头模板
```csharp
// -----------------------------------------------------------------------------
// 文件名: {FileName}
// 描述: {简要描述}
// 作者: {作者}
// 创建日期: {YYYY-MM-DD}
// 最后修改: {YYYY-MM-DD}
// -----------------------------------------------------------------------------
```

---

## 规则 3：定期回顾

### 每日回顾
- 每天下班前检查 TODO.md 是否最新
- 确认明天的工作重点

### 每周回顾
- 每周五更新里程碑进度
- 调整下周计划
- 更新风险项和阻塞项

---

**最后更新：2026-01-31**
**规则版本：v1.0**
